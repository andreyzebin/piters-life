# УМНЫЙ ХАБ ГОСТИНАЯ+КУХНЯ
smart_hub: Умный хаб Гостиная+Кухня {
  shape: rectangle
  width: 280
  height: 700
  style: {
    stroke: "#1565C0"
    fill: "#E3F2FD"
    stroke-width: 3
  }

  # Питание по PoE от ИБП
  network: Ethernet шлюз PoE {
    poe_input: Вход PoE 48V
    data_port: Данные Ethernet
  }

  # Преобразователь PoE в DC
  poe_splitter: Преобразователь PoE->DC {
    input: PoE 48V
    output_12v: 12V DC
    output_5v: 5V DC
  }

  # Входные линии силового питания
  power_in_light_lr: Питание освещение гостиная
  power_in_sockets_lr: Питание розетки гостиная
  power_in_light_kitchen: Питание освещение кухня
  power_in_sockets_kitchen: Питание розетки столешницы
  power_in_dishwasher: Питание посудомоечная машина
  power_in_hood: Питание вытяжка
  power_in_ac: Питание кондиционер

  # === РЕЛЕЙНЫЕ МОДУЛИ ===
  relays_kitchen: {
    Реле 1: Розетки рабочие
    Реле 2: Люстра обеденная
    Реле 3: Подсветка кухни
    Реле 4: Вытяжка
    Реле 5: Посудомоечная машина
    Реле 6: Холодильник
  }

  relays_living: {
    Реле 7: Люстра диванная
    Реле 8: Споты обеденные
    Реле 9: Споты диванные
    Реле 10: Розетки TV/диван
    Реле 11: Розетки обеденные
    Реле 12: Кондиционер
  }

  # Контроллер умного дома
  controller: Контроллер УД {
    power: 5V от PoE
    zigbee: Модуль Zigbee
    wifi: Модуль Wi-Fi
  }

  # === СИСТЕМА ПИТАНИЯ ===
  network.poe_input -> poe_splitter.input
  poe_splitter.output_12v -> relays_kitchen
  poe_splitter.output_12v -> relays_living
  poe_splitter.output_5v -> controller.power

  # Подключение силовых линий к реле
  power_in_light_kitchen -> relays_kitchen.Реле 2
  power_in_light_kitchen -> relays_kitchen.Реле 3
  power_in_sockets_kitchen -> relays_kitchen.Реле 1
  power_in_hood -> relays_kitchen.Реле 4
  power_in_dishwasher -> relays_kitchen.Реле 5
  power_in_light_lr -> relays_living.Реле 7
  power_in_light_lr -> relays_living.Реле 8
  power_in_light_lr -> relays_living.Реле 9
  power_in_sockets_lr -> relays_living.Реле 10
  power_in_sockets_lr -> relays_living.Реле 11
  power_in_ac -> relays_living.Реле 12

  # Подключение к сети и контроллеру
  network.data_port -> controller.wifi
  controller.zigbee -> relays_kitchen
  controller.zigbee -> relays_living
}

# === ВЫХОДЫ ИЗ УМНОГО ХАБА ===

# КУХНЯ
smart_hub -> kitchen.socket_1: 🔌 Розетка рабочая 1
smart_hub -> kitchen.dining_switch: 🔘 Выключатель обеденная зона (2x кнопочный)
smart_hub -> kitchen.dining_chandelier: 💡 Люстра обеденная
smart_hub -> kitchen.lighting: 💡 Подсветка кухни
smart_hub -> kitchen.hood: 💨 Вытяжка
smart_hub -> kitchen.dishwasher: 🍽️ Посудомоечная машина
smart_hub -> kitchen.socket_2: 🔌 Розетка рабочая 2
smart_hub -> kitchen.socket_3: 🔌 Розетка рабочая 3
smart_hub -> kitchen.socket_fridge: 🔌 Розетка холодильник

# ГОСТИНАЯ
smart_hub -> living.chandelier: 💡 Люстра диванная
smart_hub -> living.dining_spots: 💡 Споты обеденные
smart_hub -> living.spots: 💡 Споты диванные
smart_hub -> living.switch: 🔘 Выключатель (3x кнопочный)
smart_hub -> living.socket_tv: 🔌 Розетка TV
smart_hub -> living.socket_sofa_1: 🔌 Розетка диван 1
smart_hub -> living.socket_sofa_2: 🔌 Розетка диван 2
smart_hub -> living.socket_dining_1: 🔌 Розетка обеденная 1
smart_hub -> living.socket_dining_2: 🔌 Розетка обеденная 2
smart_hub -> living.ac: ❄️ Кондиционер

# ДОПОЛНИТЕЛЬНЫЕ ВЫХОДЫ
smart_hub -> living.switch_entrance: 🔘 Выключатель вход (3x кнопочный)
smart_hub -> living.switch_sofa: 🔘 Выключатель диванная зона (2x кнопочный)
smart_hub -> kitchen.switch_working: 🔘 Выключатель рабочая зона (2x кнопочный)

# === ПОДКЛЮЧЕНИЕ РЕЛЕ К ВЫХОДАМ ===

# Кухня
smart_hub.relays_kitchen.Реле 1 -> kitchen.socket_1
smart_hub.relays_kitchen.Реле 1 -> kitchen.socket_2
smart_hub.relays_kitchen.Реле 1 -> kitchen.socket_3
smart_hub.relays_kitchen.Реле 2 -> kitchen.dining_chandelier
smart_hub.relays_kitchen.Реле 3 -> kitchen.lighting
smart_hub.relays_kitchen.Реле 4 -> kitchen.hood
smart_hub.relays_kitchen.Реле 5 -> kitchen.dishwasher
smart_hub.relays_kitchen.Реле 6 -> kitchen.socket_fridge

# Гостиная
smart_hub.relays_living.Реле 7 -> living.chandelier
smart_hub.relays_living.Реле 8 -> living.dining_spots
smart_hub.relays_living.Реле 9 -> living.spots
smart_hub.relays_living.Реле 10 -> living.socket_tv
smart_hub.relays_living.Реле 10 -> living.socket_sofa_1
smart_hub.relays_living.Реле 10 -> living.socket_sofa_2
smart_hub.relays_living.Реле 11 -> living.socket_dining_1
smart_hub.relays_living.Реле 11 -> living.socket_dining_2
smart_hub.relays_living.Реле 12 -> living.ac

# === ПОДКЛЮЧЕНИЕ ВЫКЛЮЧАТЕЛЕЙ К КОНТРОЛЛЕРУ ===
kitchen.dining_switch -> smart_hub.controller.zigbee: 📶 Zigbee сигнал
living.switch -> smart_hub.controller.zigbee: 📶 Zigbee сигнал
living.switch_entrance -> smart_hub.controller.zigbee: 📶 Zigbee сигнал
living.switch_sofa -> smart_hub.controller.zigbee: 📶 Zigbee сигнал
kitchen.switch_working -> smart_hub.controller.zigbee: 📶 Zigbee сигнал

# === ГРУППИРОВКА ВЫХОДОВ ДЛЯ ЧИТАЕМОСТИ ===
kitchen: КУХНЯ {
  shape: rectangle
  style: {
    fill: "#FFF9C4"
  }
  socket_1: 🔌 Розетка рабочая 1
  dining_switch: 🔘 Выключатель обеденная зона (2x кнопочный)
  dining_chandelier: 💡 Люстра обеденная
  lighting: 💡 Подсветка кухни
  hood: 💨 Вытяжка
  dishwasher: 🍽️ Посудомоечная машина
  socket_2: 🔌 Розетка рабочая 2
  socket_3: 🔌 Розетка рабочая 3
  socket_fridge: 🔌 Розетка холодильник
  switch_working: 🔘 Выключатель рабочая зона (2x кнопочный)
}

living: ГОСТИНАЯ {
  shape: rectangle
  style: {
    fill: "#E8F5E9"
  }
  chandelier: 💡 Люстра диванная
  dining_spots: 💡 Споты обеденные
  spots: 💡 Споты диванные
  switch: 🔘 Выключатель (3x кнопочный)
  socket_tv: 🔌 Розетка TV
  socket_sofa_1: 🔌 Розетка диван 1
  socket_sofa_2: 🔌 Розетка диван 2
  socket_dining_1: 🔌 Розетка обеденная 1
  socket_dining_2: 🔌 Розетка обеденная 2
  ac: ❄️ Кондиционер
  switch_entrance: 🔘 Выключатель вход (3x кнопочный)
  switch_sofa: 🔘 Выключатель диванная зона (2x кнопочный)
}