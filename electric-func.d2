# === –í–í–û–î –ò –û–ë–©–ê–Ø –ó–ê–©–ò–¢–ê ===
main: –í–≤–æ–¥–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç C63 {
  shape: cylinder
  style: {
    stroke: "#333333"
    fill: "#BBDAFF"
  }
}

spd: –£–ó–ò–ü Type 2 40kA {
  shape: cylinder
  style: {
    stroke: "#333333"
    fill: "#FFD700"
  }
}

counter: –°—á—ë—Ç—á–∏–∫ —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏–∏ {
  shape: cylinder
  style: {
    stroke: "#333333"
    fill: "#BBDAFF"
  }
}

fire_rcd: –£–ó–û 100–º–ê –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–∂–∞—Ä–Ω–æ–µ {
  shape: cylinder
  style: {
    stroke: "#333333"
    fill: "#FF6B6B"
  }
}

main -> spd -> counter -> fire_rcd

# === –ì–†–£–ü–ü–´ –£–ó–û ===

# --- –ì–†–£–ü–ü–ê 1: –ö–æ–º—Ñ–æ—Ä—Ç–Ω—ã–µ –∑–æ–Ω—ã (30–º–ê) ---
group1: {
  shape: rectangle
  style: {
    stroke: "#1565C0"
    fill: "#E3F2FD"
    stroke-width: 3
  }

  group1_label: –ì–†–£–ü–ü–ê 1\n–£–ó–û 63–ê/30–º–ê\n–ö–æ–º—Ñ–æ—Ä—Ç–Ω—ã–µ –∑–æ–Ω—ã {
    style: {
      font-size: 20
      bold: true
    }
  }

  group1_light_relay: –†–µ–ª–µ —Å–≤–µ—Ç–∞ –≥—Ä—É–ø–ø—ã 1 {
    shape: circle
    style: {
      fill: "#FFECB3"
      stroke: "#FFA000"
    }
  }

  living_room: –ì–æ—Å—Ç–∏–Ω–∞—è {
    shape: rectangle
    style: {
      fill: "#F5F5F5"
    }
    ac: ‚ùÑÔ∏è –ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä
    sockets: üîå –†–æ–∑–µ—Ç–∫–∏
    chandelier_sofa: ‚ú® –õ—é—Å—Ç—Ä–∞ –¥–∏–≤–∞–Ω.
    spots_dining: üí° –°–ø–æ—Ç—ã –æ–±–µ–¥.
    spots_sofa: üí° –°–ø–æ—Ç—ã –¥–∏–≤–∞–Ω.
    leak_sensor: üíß –î–∞—Ç—á–∏–∫ –ø—Ä–æ—Ç–µ—á–∫–∏
  }

  bedroom: –°–ø–∞–ª—å–Ω—è {
    shape: rectangle
    style: {
      fill: "#F5F5F5"
    }
    ac: ‚ùÑÔ∏è –ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä
    sockets: üîå –†–æ–∑–µ—Ç–∫–∏
    leak_sensor: üíß –î–∞—Ç—á–∏–∫ –ø—Ä–æ—Ç–µ—á–∫–∏

    chandelier_switches: {
      shape: rectangle
      style: {
        fill: "#FFF9C4"
      }
      label: üîò –õ—é—Å—Ç—Ä–∞
      pass1: –ü—Ä–æ—Ö–æ–¥–Ω–æ–π —É –≤—Ö–æ–¥–∞
      pass2: –ü—Ä–æ—Ö–æ–¥–Ω–æ–π —É –∫—Ä–æ–≤–∞—Ç–∏
      pass1 <-> pass2
    }

    spots_switches: {
      shape: rectangle
      style: {
        fill: "#FFF9C4"
      }
      label: üîò –°–ø–æ—Ç—ã
      pass1: –ü—Ä–æ—Ö–æ–¥–Ω–æ–π —É –≤—Ö–æ–¥–∞
      pass2: –ü—Ä–æ—Ö–æ–¥–Ω–æ–π —É –∫—Ä–æ–≤–∞—Ç–∏
      pass1 <-> pass2
    }
  }

  hallway: –ö–æ—Ä–∏–¥–æ—Ä {
    shape: rectangle
    style: {
      fill: "#F5F5F5"
    }
    lighting: üí° –û—Å–≤–µ—â–µ–Ω–∏–µ
    sockets: üîå –†–æ–∑–µ—Ç–∫–∏
    night_light: üåô –ù–æ—á–Ω–æ–µ
    motion_sensor: üëÅÔ∏è –î–∞—Ç—á–∏–∫ –¥–≤–∏–∂.
    master_switch: üè† –ú–∞—Å—Ç–µ—Ä-–≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å
  }

  kids_room: –î–µ—Ç—Å–∫–∞—è {
    shape: rectangle
    style: {
      fill: "#F5F5F5"
    }
    sockets: üîå –†–æ–∑–µ—Ç–∫–∏
    spots: üí° –°–ø–æ—Ç—ã
    leak_sensor: üíß –î–∞—Ç—á–∏–∫ –ø—Ä–æ—Ç–µ—á–∫–∏
  }

  group1_label -> group1_light_relay
  group1_label -> living_room
  group1_label -> bedroom
  group1_label -> hallway
  group1_label -> kids_room

  # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–≤–µ—Ç–∞ –∫ —Ä–µ–ª–µ –≥—Ä—É–ø–ø—ã 1
  group1_light_relay -> living_room.chandelier_sofa
  group1_light_relay -> living_room.spots_sofa
  group1_light_relay -> living_room.spots_dining
  group1_light_relay -> bedroom.chandelier_switches
  group1_light_relay -> bedroom.spots_switches
  group1_light_relay -> hallway.lighting
  group1_light_relay -> kids_room.spots
}

# --- –ì–†–£–ü–ü–ê 2: –ú–æ–∫—Ä—ã–µ –∑–æ–Ω—ã (10–º–ê) ---
group2: {
  shape: rectangle
  style: {
    stroke: "#C62828"
    fill: "#FFEBEE"
    stroke-width: 3
  }

  group2_label: –ì–†–£–ü–ü–ê 2\n–£–ó–û 40–ê/10–º–ê\n–ú–æ–∫—Ä—ã–µ –∑–æ–Ω—ã {
    style: {
      font-size: 20
      bold: true
    }
  }

  group2_light_relay: –†–µ–ª–µ —Å–≤–µ—Ç–∞ –≥—Ä—É–ø–ø—ã 2 {
    shape: circle
    style: {
      fill: "#FFECB3"
      stroke: "#FFA000"
    }
  }

  kitchen: –ö—É—Ö–Ω—è {
    shape: rectangle
    style: {
      fill: "#F5F5F5"
    }
    sockets: üîå –†–æ–∑–µ—Ç–∫–∏
    dishwasher: üçΩÔ∏è –ü–æ—Å—É–¥–æ–º–æ–π–∫–∞
    lighting: üí° –ü–æ–¥—Å–≤–µ—Ç–∫–∞
    hood: üí® –í—ã—Ç—è–∂–∫–∞
    night_light: üåô –ù–æ—á–Ω–æ–µ
    chandelier_dining: ‚ú® –õ—é—Å—Ç—Ä–∞ –æ–±–µ–¥.
    leak_sensor: üíß –î–∞—Ç—á–∏–∫ –ø—Ä–æ—Ç–µ—á–∫–∏
  }

  bathroom1: –°–∞–Ω—É–∑–µ–ª 1 {
    shape: rectangle
    style: {
      fill: "#F5F5F5"
    }
    lighting: üí° –û—Å–≤–µ—â–µ–Ω–∏–µ
    sockets: üîå –†–æ–∑–µ—Ç–∫–∏
    towel_rail: üî• –ü–æ–ª–æ—Ç–µ–Ω—Ü–µ—Å—É—à–∏—Ç–µ–ª—å
    night_light: üåô –ù–æ—á–Ω–æ–µ
    leak_sensor: üíß –î–∞—Ç—á–∏–∫ –ø—Ä–æ—Ç–µ—á–∫–∏
    water_valve: üö∞ –ó–∞–ø–æ—Ä–Ω—ã–π –∫–ª–∞–ø–∞–Ω {
      shape: cylinder
      style: {
        fill: "#81C784"
      }
    }
    ventilation: {
      shape: rectangle
      style: {
        fill: "#E3F2FD"
      }
      label: üå¨Ô∏è –í–µ–Ω—Ç–∏–ª—è—Ü–∏—è
      fan: –í–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä
      timer_relay: ‚è±Ô∏è –†–µ–ª–µ –≤—Ä–µ–º–µ–Ω–∏
      fan_switch: –í—ã–∫–ª—é—á–∞—Ç–µ–ª—å
      fan_switch -> timer_relay
    }
  }

  bathroom2: –°–∞–Ω—É–∑–µ–ª 2 {
    shape: rectangle
    style: {
      fill: "#F5F5F5"
    }
    sockets: üîå –†–æ–∑–µ—Ç–∫–∏
    lighting: üí° –û—Å–≤–µ—â–µ–Ω–∏–µ
    ventilation: {
      shape: rectangle
      style: {
        fill: "#E3F2FD"
      }
      label: üå¨Ô∏è –í–µ–Ω—Ç–∏–ª—è—Ü–∏—è
      fan: –í–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä
      timer_relay: ‚è±Ô∏è –†–µ–ª–µ –≤—Ä–µ–º–µ–Ω–∏
      fan_switch: –í—ã–∫–ª—é—á–∞—Ç–µ–ª—å
      fan_switch -> timer_relay
    }
    leak_sensor: üíß –î–∞—Ç—á–∏–∫ –ø—Ä–æ—Ç–µ—á–∫–∏
  }

  laundry: –ü–æ—Å—Ç–∏—Ä–æ—á–Ω–∞—è {
    shape: rectangle
    style: {
      fill: "#F5F5F5"
    }
    towel_rail: üî• –ü–æ–ª–æ—Ç–µ–Ω—Ü–µ—Å—É—à–∏—Ç–µ–ª—å
    ups: üì∂ –ë–µ—Å–ø–µ—Ä–µ–±–æ–π–Ω–∏–∫
    leak_sensor: üíß –î–∞—Ç—á–∏–∫ –ø—Ä–æ—Ç–µ—á–∫–∏
  }

  stove_group: –≠–ª–µ–∫—Ç—Ä–æ–ø–ª–∏—Ç–∞ {
    shape: rectangle
    style: {
      fill: "#FFE0B2"
    }
    stove: üî• –ü–ª–∏—Ç–∞
  }

  waterheater_group: –ë–æ–π–ª–µ—Ä {
    shape: rectangle
    style: {
      fill: "#C8E6C9"
    }
    waterheater: üî• –ë–æ–π–ª–µ—Ä
    leak_sensor: üíß –î–∞—Ç—á–∏–∫ –ø—Ä–æ—Ç–µ—á–∫–∏
  }

  washer_group: –°—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ {
    shape: rectangle
    style: {
      fill: "#E1BEE7"
    }
    washer: üß∫ –°—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞
    leak_sensor: üíß –î–∞—Ç—á–∏–∫ –ø—Ä–æ—Ç–µ—á–∫–∏
  }

  group2_label -> group2_light_relay
  group2_label -> kitchen
  group2_label -> bathroom1
  group2_label -> bathroom2
  group2_label -> laundry
  group2_label -> stove_group
  group2_label -> waterheater_group
  group2_label -> washer_group

  # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–≤–µ—Ç–∞ –∫ —Ä–µ–ª–µ –≥—Ä—É–ø–ø—ã 2
  group2_light_relay -> kitchen.lighting
  group2_light_relay -> kitchen.chandelier_dining
  group2_light_relay -> bathroom1.lighting
  group2_light_relay -> bathroom2.lighting
}

# === –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –ì–†–£–ü–ü –ö –í–í–û–î–£ ===
fire_rcd -> group1.group1_label
fire_rcd -> group2.group2_label

# === –°–ò–°–¢–ï–ú–ê –£–ú–ù–û–ì–û –î–û–ú–ê ===
smart_home: –£–ú–ù–´–ô –î–û–ú {
  shape: cylinder
  style: {
    stroke: "#333333"
    fill: "#E1BEE7"
  }
}

smart_living_room: –£–ú–ù–´–ô –î–û–ú. –ì–û–°–¢–ò–ù–ê–Ø {
  shape: cylinder
  style: {
    stroke: "#333333"
    fill: "#E1BEE7"
  }
}

# === –ö–û–ù–¢–†–û–õ–õ–ï–† –ü–†–û–¢–ï–ß–ï–ö ===
leak_protection: {
  shape: rectangle
  style: {
    fill: "#E8F5E9"
    stroke: "#2E7D32"
    stroke-width: 2
  }
  label: üíß –°–ò–°–¢–ï–ú–ê –ó–ê–©–ò–¢–´ –û–¢ –ü–†–û–¢–ï–ß–ï–ö

  leak_controller: –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø—Ä–æ—Ç–µ—á–µ–∫ {
    shape: cylinder
    style: {
      fill: "#C8E6C9"
    }
  }

}

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –ø—Ä–æ—Ç–µ—á–µ–∫ –∫ —É–º–Ω–æ–º—É –¥–æ–º—É
leak_protection.leak_controller -> smart_home

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞—Ç—á–∏–∫–æ–≤ –ø—Ä–æ—Ç–µ—á–µ–∫ –∫ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É –ø—Ä–æ—Ç–µ—á–µ–∫
leak_protection.leak_controller -> group2.bathroom1.water_valve
leak_protection.leak_controller -> group2.bathroom1.leak_sensor
leak_protection.leak_controller -> group2.kitchen.leak_sensor
leak_protection.leak_controller -> group1.living_room.leak_sensor
leak_protection.leak_controller -> group1.bedroom.leak_sensor
leak_protection.leak_controller -> group1.kids_room.leak_sensor
leak_protection.leak_controller -> group2.bathroom2.leak_sensor
leak_protection.leak_controller -> group2.laundry.leak_sensor
leak_protection.leak_controller -> group2.waterheater_group.leak_sensor
leak_protection.leak_controller -> group2.washer_group.leak_sensor

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É–º–Ω–æ–≥–æ –¥–æ–º–∞ –∫ –¥—Ä—É–≥–∏–º —Å–∏—Å—Ç–µ–º–∞–º
group2.laundry.ups -> smart_home
smart_home -> group1.hallway.motion_sensor
smart_home -> group2.kitchen.night_light
smart_home -> group2.bathroom1.night_light
smart_home -> group1.hallway.night_light

smart_living_room -> group2.kitchen.chandelier_dining
smart_living_room -> group2.kitchen.lighting
smart_living_room -> group1.living_room.chandelier_sofa
smart_living_room -> group1.living_room.spots_sofa
smart_living_room -> group1.living_room.spots_dining

smart_home -> smart_living_room

# === –ú–ê–°–¢–ï–†-–í–´–ö–õ–Æ–ß–ê–¢–ï–õ–¨ ===
master_control: –ú–∞—Å—Ç–µ—Ä-–≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å {
  shape: rectangle
  style: {
    fill: "#FFF9C4"
    stroke: "#FF9800"
  }
  master_switch: üè† –í—ã–∫–ª—é—á–∞—Ç–µ–ª—å (–≤—Ö–æ–¥)
}

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä-–≤—ã–∫–ª—é—á–∞—Ç–µ–ª—è –∫ —Ä–µ–ª–µ —Å–≤–µ—Ç–∞
group1.hallway.master_switch -> master_control.master_switch
master_control.master_switch -> group1.group1_light_relay
master_control.master_switch -> group2.group2_light_relay


direction: down
