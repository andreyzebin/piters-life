# === Ð’Ð’ÐžÐ” Ð˜ ÐžÐ‘Ð©ÐÐ¯ Ð—ÐÐ©Ð˜Ð¢Ð ===
main: Ð’Ð²Ð¾Ð´Ð½Ð¾Ð¹ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚ C63 {
  shape: cylinder
  style: {
    stroke: "#333333"
    fill: "#BBDAFF"
  }
}

spd: Ð£Ð—Ð˜ÐŸ Type 2 40kA {
  shape: cylinder
  style: {
    stroke: "#333333"
    fill: "#FFD700"
  }
}

counter: Ð¡Ñ‡Ñ‘Ñ‚Ñ‡Ð¸Ðº ÑÐ»ÐµÐºÑ‚Ñ€Ð¾ÑÐ½ÐµÑ€Ð³Ð¸Ð¸ {
  shape: cylinder
  style: {
    stroke: "#333333"
    fill: "#BBDAFF"
  }
}

fire_rcd: Ð£Ð—Ðž 100Ð¼Ð ÐŸÑ€Ð¾Ñ‚Ð¸Ð²Ð¾Ð¿Ð¾Ð¶Ð°Ñ€Ð½Ð¾Ðµ {
  shape: cylinder
  style: {
    stroke: "#333333"
    fill: "#FF6B6B"
  }
}

main -> spd -> counter -> fire_rcd

# === Ð“Ð Ð£ÐŸÐŸÐ« Ð£Ð—Ðž ===

# --- Ð“Ð Ð£ÐŸÐŸÐ 1: ÐšÐ¾Ð¼Ñ„Ð¾Ñ€Ñ‚Ð½Ñ‹Ðµ Ð·Ð¾Ð½Ñ‹ (30Ð¼Ð) ---
group1: {
  shape: rectangle
  style: {
    stroke: "#1565C0"
    fill: "#E3F2FD"
    stroke-width: 3
  }

  group1_label: Ð“Ð Ð£ÐŸÐŸÐ 1\nÐ£Ð—Ðž 63Ð/30Ð¼Ð\nÐšÐ¾Ð¼Ñ„Ð¾Ñ€Ñ‚Ð½Ñ‹Ðµ Ð·Ð¾Ð½Ñ‹ {
    style: {
      font-size: 20
      bold: true
    }
  }

  group1_light_relay: Ð ÐµÐ»Ðµ ÑÐ²ÐµÑ‚Ð° Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹ 1 {
    shape: circle
    style: {
      fill: "#FFECB3"
      stroke: "#FFA000"
    }
  }

  living_room: Ð“Ð¾ÑÑ‚Ð¸Ð½Ð°Ñ {
    shape: rectangle
    style: {
      fill: "#F5F5F5"
    }
    ac: â„ï¸ ÐšÐ¾Ð½Ð´Ð¸Ñ†Ð¸Ð¾Ð½ÐµÑ€
    sockets: ðŸ”Œ Ð Ð¾Ð·ÐµÑ‚ÐºÐ¸
    chandelier_sofa: âœ¨ Ð›ÑŽÑÑ‚Ñ€Ð° Ð´Ð¸Ð²Ð°Ð½.
    spots_dining: ðŸ’¡ Ð¡Ð¿Ð¾Ñ‚Ñ‹ Ð¾Ð±ÐµÐ´.
    spots_sofa: ðŸ’¡ Ð¡Ð¿Ð¾Ñ‚Ñ‹ Ð´Ð¸Ð²Ð°Ð½.
    leak_sensor: ðŸ’§ Ð”Ð°Ñ‚Ñ‡Ð¸Ðº Ð¿Ñ€Ð¾Ñ‚ÐµÑ‡ÐºÐ¸
  }

  bedroom: Ð¡Ð¿Ð°Ð»ÑŒÐ½Ñ {
    shape: rectangle
    style: {
      fill: "#F5F5F5"
    }
    ac: â„ï¸ ÐšÐ¾Ð½Ð´Ð¸Ñ†Ð¸Ð¾Ð½ÐµÑ€
    sockets: ðŸ”Œ Ð Ð¾Ð·ÐµÑ‚ÐºÐ¸
    leak_sensor: ðŸ’§ Ð”Ð°Ñ‚Ñ‡Ð¸Ðº Ð¿Ñ€Ð¾Ñ‚ÐµÑ‡ÐºÐ¸

    chandelier_switches: {
      shape: rectangle
      style: {
        fill: "#FFF9C4"
      }
      label: ðŸ”˜ Ð›ÑŽÑÑ‚Ñ€Ð°
      pass1: Ð’Ñ…Ð¾Ð´
      pass2: Ð£ ÐºÑ€Ð¾Ð²Ð°Ñ‚Ð¸
    }

    spots_switches: {
      shape: rectangle
      style: {
        fill: "#FFF9C4"
      }
      label: ðŸ”˜ Ð¡Ð¿Ð¾Ñ‚Ñ‹
      pass1: Ð’Ñ…Ð¾Ð´
      pass2: Ð£ ÐºÑ€Ð¾Ð²Ð°Ñ‚Ð¸
    }
  }

  hallway: ÐšÐ¾Ñ€Ð¸Ð´Ð¾Ñ€ {
    shape: rectangle
    style: {
      fill: "#F5F5F5"
    }
    lighting: ðŸ’¡ ÐžÑÐ²ÐµÑ‰ÐµÐ½Ð¸Ðµ
    sockets: ðŸ”Œ Ð Ð¾Ð·ÐµÑ‚ÐºÐ¸
    night_light: ðŸŒ™ ÐÐ¾Ñ‡Ð½Ð¾Ðµ
    motion_sensor: ðŸ‘ï¸ Ð”Ð°Ñ‚Ñ‡Ð¸Ðº Ð´Ð²Ð¸Ð¶.
    master_switch: ðŸ  ÐœÐ°ÑÑ‚ÐµÑ€-Ð²Ñ‹ÐºÐ»ÑŽÑ‡Ð°Ñ‚ÐµÐ»ÑŒ
  }

  kids_room: Ð”ÐµÑ‚ÑÐºÐ°Ñ {
    shape: rectangle
    style: {
      fill: "#F5F5F5"
    }
    sockets: ðŸ”Œ Ð Ð¾Ð·ÐµÑ‚ÐºÐ¸
    spots: ðŸ’¡ Ð¡Ð¿Ð¾Ñ‚Ñ‹
    leak_sensor: ðŸ’§ Ð”Ð°Ñ‚Ñ‡Ð¸Ðº Ð¿Ñ€Ð¾Ñ‚ÐµÑ‡ÐºÐ¸
  }

  group1_label -> group1_light_relay
  group1_label -> living_room
  group1_label -> bedroom
  group1_label -> hallway
  group1_label -> kids_room

  # ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ ÑÐ²ÐµÑ‚Ð° Ðº Ñ€ÐµÐ»Ðµ Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹ 1
  group1_light_relay -> living_room.chandelier_sofa
  group1_light_relay -> living_room.spots_sofa
  group1_light_relay -> living_room.spots_dining
  group1_light_relay -> bedroom.chandelier_switches
  group1_light_relay -> bedroom.spots_switches
  group1_light_relay -> hallway.lighting
  group1_light_relay -> kids_room.spots
}

# --- Ð“Ð Ð£ÐŸÐŸÐ 2: ÐœÐ¾ÐºÑ€Ñ‹Ðµ Ð·Ð¾Ð½Ñ‹ (10Ð¼Ð) ---
group2: {
  shape: rectangle
  style: {
    stroke: "#C62828"
    fill: "#FFEBEE"
    stroke-width: 3
  }

  group2_label: Ð“Ð Ð£ÐŸÐŸÐ 2\nÐ£Ð—Ðž 40Ð/10Ð¼Ð\nÐœÐ¾ÐºÑ€Ñ‹Ðµ Ð·Ð¾Ð½Ñ‹ {
    style: {
      font-size: 20
      bold: true
    }
  }

  group2_light_relay: Ð ÐµÐ»Ðµ ÑÐ²ÐµÑ‚Ð° Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹ 2 {
    shape: circle
    style: {
      fill: "#FFECB3"
      stroke: "#FFA000"
    }
  }

  kitchen: ÐšÑƒÑ…Ð½Ñ {
    shape: rectangle
    style: {
      fill: "#F5F5F5"
    }
    sockets: ðŸ”Œ Ð Ð¾Ð·ÐµÑ‚ÐºÐ¸
    dishwasher: ðŸ½ï¸ ÐŸÐ¾ÑÑƒÐ´Ð¾Ð¼Ð¾Ð¹ÐºÐ°
    lighting: ðŸ’¡ ÐŸÐ¾Ð´ÑÐ²ÐµÑ‚ÐºÐ°
    hood: ðŸ’¨ Ð’Ñ‹Ñ‚ÑÐ¶ÐºÐ°
    night_light: ðŸŒ™ ÐÐ¾Ñ‡Ð½Ð¾Ðµ
    chandelier_dining: âœ¨ Ð›ÑŽÑÑ‚Ñ€Ð° Ð¾Ð±ÐµÐ´.
    leak_sensor: ðŸ’§ Ð”Ð°Ñ‚Ñ‡Ð¸Ðº Ð¿Ñ€Ð¾Ñ‚ÐµÑ‡ÐºÐ¸
  }

  bathroom1: Ð¡Ð°Ð½ÑƒÐ·ÐµÐ» 1 {
    shape: rectangle
    style: {
      fill: "#F5F5F5"
    }
    lighting: ðŸ’¡ ÐžÑÐ²ÐµÑ‰ÐµÐ½Ð¸Ðµ
    sockets: ðŸ”Œ Ð Ð¾Ð·ÐµÑ‚ÐºÐ¸
    towel_rail: ðŸ”¥ ÐŸÐ¾Ð»Ð¾Ñ‚ÐµÐ½Ñ†ÐµÑÑƒÑˆÐ¸Ñ‚ÐµÐ»ÑŒ
    night_light: ðŸŒ™ ÐÐ¾Ñ‡Ð½Ð¾Ðµ
    leak_sensor: ðŸ’§ Ð”Ð°Ñ‚Ñ‡Ð¸Ðº Ð¿Ñ€Ð¾Ñ‚ÐµÑ‡ÐºÐ¸
    water_valve: ðŸš° Ð—Ð°Ð¿Ð¾Ñ€Ð½Ñ‹Ð¹ ÐºÐ»Ð°Ð¿Ð°Ð½ {
      shape: cylinder
      style: {
        fill: "#81C784"
      }
    }
    ventilation: {
      shape: rectangle
      style: {
        fill: "#E3F2FD"
      }
      label: ðŸŒ¬ï¸ Ð’ÐµÐ½Ñ‚Ð¸Ð»ÑÑ†Ð¸Ñ
      fan: Ð’ÐµÐ½Ñ‚Ð¸Ð»ÑÑ‚Ð¾Ñ€
      timer_relay: â±ï¸ Ð ÐµÐ»Ðµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸
    }
  }

  bathroom2: Ð¡Ð°Ð½ÑƒÐ·ÐµÐ» 2 {
    shape: rectangle
    style: {
      fill: "#F5F5F5"
    }
    sockets: ðŸ”Œ Ð Ð¾Ð·ÐµÑ‚ÐºÐ¸
    lighting: ðŸ’¡ ÐžÑÐ²ÐµÑ‰ÐµÐ½Ð¸Ðµ
    ventilation: {
      shape: rectangle
      style: {
        fill: "#E3F2FD"
      }
      label: ðŸŒ¬ï¸ Ð’ÐµÐ½Ñ‚Ð¸Ð»ÑÑ†Ð¸Ñ
      fan: Ð’ÐµÐ½Ñ‚Ð¸Ð»ÑÑ‚Ð¾Ñ€
      timer_relay: â±ï¸ Ð ÐµÐ»Ðµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸
    }
    leak_sensor: ðŸ’§ Ð”Ð°Ñ‚Ñ‡Ð¸Ðº Ð¿Ñ€Ð¾Ñ‚ÐµÑ‡ÐºÐ¸
  }

  laundry: ÐŸÐ¾ÑÑ‚Ð¸Ñ€Ð¾Ñ‡Ð½Ð°Ñ {
    shape: rectangle
    style: {
      fill: "#F5F5F5"
    }
    towel_rail: ðŸ”¥ ÐŸÐ¾Ð»Ð¾Ñ‚ÐµÐ½Ñ†ÐµÑÑƒÑˆÐ¸Ñ‚ÐµÐ»ÑŒ
    ups: ðŸ“¶ Ð‘ÐµÑÐ¿ÐµÑ€ÐµÐ±Ð¾Ð¹Ð½Ð¸Ðº
    leak_sensor: ðŸ’§ Ð”Ð°Ñ‚Ñ‡Ð¸Ðº Ð¿Ñ€Ð¾Ñ‚ÐµÑ‡ÐºÐ¸
  }

  stove_group: Ð­Ð»ÐµÐºÑ‚Ñ€Ð¾Ð¿Ð»Ð¸Ñ‚Ð° {
    shape: rectangle
    style: {
      fill: "#FFE0B2"
    }
    stove: ðŸ”¥ ÐŸÐ»Ð¸Ñ‚Ð°
  }

  waterheater_group: Ð‘Ð¾Ð¹Ð»ÐµÑ€ {
    shape: rectangle
    style: {
      fill: "#C8E6C9"
    }
    waterheater: ðŸ”¥ Ð‘Ð¾Ð¹Ð»ÐµÑ€
    leak_sensor: ðŸ’§ Ð”Ð°Ñ‚Ñ‡Ð¸Ðº Ð¿Ñ€Ð¾Ñ‚ÐµÑ‡ÐºÐ¸
  }

  washer_group: Ð¡Ñ‚Ð¸Ñ€Ð°Ð»ÑŒÐ½Ð°Ñ Ð¼Ð°ÑˆÐ¸Ð½Ð° {
    shape: rectangle
    style: {
      fill: "#E1BEE7"
    }
    washer: ðŸ§º Ð¡Ñ‚Ð¸Ñ€Ð°Ð»ÑŒÐ½Ð°Ñ Ð¼Ð°ÑˆÐ¸Ð½Ð°
    leak_sensor: ðŸ’§ Ð”Ð°Ñ‚Ñ‡Ð¸Ðº Ð¿Ñ€Ð¾Ñ‚ÐµÑ‡ÐºÐ¸
  }

  group2_label -> group2_light_relay
  group2_label -> kitchen
  group2_label -> bathroom1
  group2_label -> bathroom2
  group2_label -> laundry
  group2_label -> stove_group
  group2_label -> waterheater_group
  group2_label -> washer_group

  # ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ ÑÐ²ÐµÑ‚Ð° Ðº Ñ€ÐµÐ»Ðµ Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹ 2
  group2_light_relay -> kitchen.lighting
  group2_light_relay -> kitchen.chandelier_dining
  group2_light_relay -> bathroom1.lighting
  group2_light_relay -> bathroom2.lighting
}

# === ÐŸÐžÐ”ÐšÐ›Ð®Ð§Ð•ÐÐ˜Ð• Ð“Ð Ð£ÐŸÐŸ Ðš Ð’Ð’ÐžÐ”Ð£ ===
fire_rcd -> group1.group1_label
fire_rcd -> group2.group2_label

# === Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ Ð£ÐœÐÐžÐ“Ðž Ð”ÐžÐœÐ ===
smart_home: Ð£ÐœÐÐ«Ð™ Ð”ÐžÐœ {
  shape: cylinder
  style: {
    stroke: "#333333"
    fill: "#E1BEE7"
  }
}

# === ÐšÐžÐÐ¢Ð ÐžÐ›Ð›Ð•Ð  ÐŸÐ ÐžÐ¢Ð•Ð§Ð•Ðš ===
leak_protection: {
  shape: rectangle
  style: {
    fill: "#E8F5E9"
    stroke: "#2E7D32"
    stroke-width: 2
  }
  label: ðŸ’§ Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ Ð—ÐÐ©Ð˜Ð¢Ð« ÐžÐ¢ ÐŸÐ ÐžÐ¢Ð•Ð§Ð•Ðš

  leak_controller: ÐšÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€ Ð¿Ñ€Ð¾Ñ‚ÐµÑ‡ÐµÐº {
    shape: cylinder
    style: {
      fill: "#C8E6C9"
    }
  }

}

# ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ð° Ð¿Ñ€Ð¾Ñ‚ÐµÑ‡ÐµÐº Ðº ÑƒÐ¼Ð½Ð¾Ð¼Ñƒ Ð´Ð¾Ð¼Ñƒ
leak_protection.leak_controller -> smart_home

# ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð²ÑÐµÑ… Ð´Ð°Ñ‚Ñ‡Ð¸ÐºÐ¾Ð² Ð¿Ñ€Ð¾Ñ‚ÐµÑ‡ÐµÐº Ðº ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ñƒ Ð¿Ñ€Ð¾Ñ‚ÐµÑ‡ÐµÐº
leak_protection.leak_controller -> group2.bathroom1.water_valve
leak_protection.leak_controller -> group2.bathroom1.leak_sensor
leak_protection.leak_controller -> group2.kitchen.leak_sensor
leak_protection.leak_controller -> group1.living_room.leak_sensor
leak_protection.leak_controller -> group1.bedroom.leak_sensor
leak_protection.leak_controller -> group1.kids_room.leak_sensor
leak_protection.leak_controller -> group2.bathroom2.leak_sensor
leak_protection.leak_controller -> group2.laundry.leak_sensor
leak_protection.leak_controller -> group2.waterheater_group.leak_sensor
leak_protection.leak_controller -> group2.washer_group.leak_sensor

# ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ ÑƒÐ¼Ð½Ð¾Ð³Ð¾ Ð´Ð¾Ð¼Ð° Ðº Ð´Ñ€ÑƒÐ³Ð¸Ð¼ ÑÐ¸ÑÑ‚ÐµÐ¼Ð°Ð¼
group2.laundry.ups -> smart_home
smart_home -> group1.hallway.motion_sensor
smart_home -> group2.kitchen.night_light
smart_home -> group2.bathroom1.night_light
smart_home -> group1.hallway.night_light

# === ÐœÐÐ¡Ð¢Ð•Ð -Ð’Ð«ÐšÐ›Ð®Ð§ÐÐ¢Ð•Ð›Ð¬ ===
master_control: ÐœÐ°ÑÑ‚ÐµÑ€-Ð²Ñ‹ÐºÐ»ÑŽÑ‡Ð°Ñ‚ÐµÐ»ÑŒ {
  shape: rectangle
  style: {
    fill: "#FFF9C4"
    stroke: "#FF9800"
  }
  master_switch: ðŸ  Ð’Ñ‹ÐºÐ»ÑŽÑ‡Ð°Ñ‚ÐµÐ»ÑŒ (Ð²Ñ…Ð¾Ð´)
}

# ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð¼Ð°ÑÑ‚ÐµÑ€-Ð²Ñ‹ÐºÐ»ÑŽÑ‡Ð°Ñ‚ÐµÐ»Ñ Ðº Ñ€ÐµÐ»Ðµ ÑÐ²ÐµÑ‚Ð°
group1.hallway.master_switch -> master_control.master_switch
master_control.master_switch -> group1.group1_light_relay
master_control.master_switch -> group2.group2_light_relay


direction: down
